# See https://aka.ms/yaml

trigger:
  - master
  - unified-api
  - v*.*.x
pr:
  - master
  - unified-api
  - v*.*.x

stages:
  - stage: Build
    jobs:
      - job: build
        pool:
          name: MLNX
          demands: Maven
        steps:
          - bash: |
              set -xeE
              module load hpcx-gcc
          - task: Maven@3
            displayName:  build
            inputs:
              jdkVersionOption: "1.8"
              publishJUnitResults: false
              goals: "package"
              options: "-B -Dmaven.repo.local=$(System.DefaultWorkingDirectory)/target/.deps -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn"
